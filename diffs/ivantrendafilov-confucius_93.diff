# Project: ivantrendafilov-confucius / Case: 93

## original.java -> misuse.java
-		try {
-			return Byte.parseByte(getKey(key));
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable byte", key));
-		}
+		return Byte.parseByte(getKey(key));
-		try {
-			return value == null ? defaultValue : Byte.parseByte(value);
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable byte", key));
-		}
+		return value == null ? defaultValue : Byte.parseByte(value);
-		try {
-			for (String value : getKey(key).split(separator))
-				parts.add(Byte.parseByte(value.trim()));
-			return parts;
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable byte", key));
-		}
+		for (String value : getKey(key).split(separator))
+			parts.add(Byte.parseByte(value.trim()));
+		return parts;
-		try {
-			return Long.parseLong(getKey(key));
-		} catch (NumberFormatException e) {
-		        throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable long", key));
-		}
+		return Long.parseLong(getKey(key));
-		try {
-			return value == null ? defaultValue : Long.parseLong(value);
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable long", key));
-		}
+		return value == null ? defaultValue : Long.parseLong(value);
-		try {
-			for (String value : getKey(key).split(separator))
-				parts.add(Long.parseLong(value.trim()));
-			return parts;
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable long", key));
-		}
+		for (String value : getKey(key).split(separator))
+			parts.add(Long.parseLong(value.trim()));
+		return parts;
-		try {
-			return Short.parseShort(getKey(key));
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable short", key));
-		}
+		return Short.parseShort(getKey(key));
-		try {
-			return value == null ? defaultValue : Short.parseShort(value);
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable short", key));
-		}
+		return value == null ? defaultValue : Short.parseShort(value);
-		try {
-			for (String value : getKey(key).split(separator))
-				parts.add(Short.parseShort(value.trim()));
-			return parts;
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable short", key));
-		}
+		for (String value : getKey(key).split(separator))
+			parts.add(Short.parseShort(value.trim()));
+		return parts;

## misuse.java -> fixed.java
-		return Byte.parseByte(getKey(key));
+		String value = getKey(key);
+		try {
+			return Byte.parseByte(value);
+		} catch (NumberFormatException e) {
+			throw new ConfigurationException(String.format("Unable to parse byte value for key [%s] with value [%s]", key, value), e);
+		}
-		return value == null ? defaultValue : Byte.parseByte(value);
+		if (value == null)
+			return defaultValue;
+		try {
+			return Byte.parseByte(value);
+		} catch (NumberFormatException e) {
+			throw new ConfigurationException(String.format("Unable to parse byte value for key [%s] with value [%s]", key, value), e);
+		}
-		for (String value : getKey(key).split(separator))
-			parts.add(Byte.parseByte(value.trim()));
+		for (String value : getKey(key).split(separator)) {
+			String trimmed = value.trim();
+			try {
+				parts.add(Byte.parseByte(trimmed));
+			} catch (NumberFormatException e) {
+				throw new ConfigurationException(String.format("Unable to parse byte value in list for key [%s] with value [%s]", key, trimmed), e);
+			}
+		}
-}
+}

## original.java -> fixed.java
+		String value = getKey(key);
-			return Byte.parseByte(getKey(key));
+			return Byte.parseByte(value);
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable byte", key));
+			throw new ConfigurationException(String.format("Unable to parse byte value for key [%s] with value [%s]", key, value), e);
+		if (value == null)
+			return defaultValue;
-			return value == null ? defaultValue : Byte.parseByte(value);
+			return Byte.parseByte(value);
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable byte", key));
+			throw new ConfigurationException(String.format("Unable to parse byte value for key [%s] with value [%s]", key, value), e);
-		try {
-			for (String value : getKey(key).split(separator))
-				parts.add(Byte.parseByte(value.trim()));
-			return parts;
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable byte", key));
+		for (String value : getKey(key).split(separator)) {
+			String trimmed = value.trim();
+			try {
+				parts.add(Byte.parseByte(trimmed));
+			} catch (NumberFormatException e) {
+				throw new ConfigurationException(String.format("Unable to parse byte value in list for key [%s] with value [%s]", key, trimmed), e);
+			}
+		return parts;
-		try {
-			return Long.parseLong(getKey(key));
-		} catch (NumberFormatException e) {
-		        throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable long", key));
-		}
+		return Long.parseLong(getKey(key));
-		try {
-			return value == null ? defaultValue : Long.parseLong(value);
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable long", key));
-		}
+		return value == null ? defaultValue : Long.parseLong(value);
-		try {
-			for (String value : getKey(key).split(separator))
-				parts.add(Long.parseLong(value.trim()));
-			return parts;
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable long", key));
-		}
+		for (String value : getKey(key).split(separator))
+			parts.add(Long.parseLong(value.trim()));
+		return parts;
-		try {
-			return Short.parseShort(getKey(key));
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable short", key));
-		}
+		return Short.parseShort(getKey(key));
-		try {
-			return value == null ? defaultValue : Short.parseShort(value);
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable short", key));
-		}
+		return value == null ? defaultValue : Short.parseShort(value);
-		try {
-			for (String value : getKey(key).split(separator))
-				parts.add(Short.parseShort(value.trim()));
-			return parts;
-		} catch (NumberFormatException e) {
-			throw new NumberFormatException(String.format("Configuration value [%s] is not a parsable short", key));
-		}
+		for (String value : getKey(key).split(separator))
+			parts.add(Short.parseShort(value.trim()));
+		return parts;
-}
+}
