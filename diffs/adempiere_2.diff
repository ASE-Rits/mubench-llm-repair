# Project: adempiere / Case: 2

## original.java -> misuse.java
- * Security Services.
- * <p>
- * Change log:
- * <ul>
- * <li>2007-01-27 - teo_sarca - [ 1598095 ] class Secure is not working with UTF8
- * </ul>
- *  
+ *  Security Services.
+ *
-				byte[] encBytes = m_cipher.doFinal(clearText.getBytes("UTF8"));
+				byte[] encBytes = m_cipher.doFinal(clearText.getBytes());
-				String retValue = new String(out, "UTF8");
+				String retValue = new String(out);

## misuse.java -> fixed.java
+import java.nio.charset.StandardCharsets;
-				byte[] encBytes = m_cipher.doFinal(clearText.getBytes());
+				byte[] encBytes = m_cipher.doFinal(clearText.getBytes(StandardCharsets.UTF_8));
-				String retValue = new String(out);
+				String retValue = new String(out, StandardCharsets.UTF_8);
-		byte[] input = value.getBytes();
+		byte[] input = value.getBytes(StandardCharsets.UTF_8);

## original.java -> fixed.java
+import java.nio.charset.StandardCharsets;
- * Security Services.
- * <p>
- * Change log:
- * <ul>
- * <li>2007-01-27 - teo_sarca - [ 1598095 ] class Secure is not working with UTF8
- * </ul>
- *  
+ *  Security Services.
+ *
-				byte[] encBytes = m_cipher.doFinal(clearText.getBytes("UTF8"));
+				byte[] encBytes = m_cipher.doFinal(clearText.getBytes(StandardCharsets.UTF_8));
-				String retValue = new String(out, "UTF8");
+				String retValue = new String(out, StandardCharsets.UTF_8);
-		byte[] input = value.getBytes();
+		byte[] input = value.getBytes(StandardCharsets.UTF_8);
