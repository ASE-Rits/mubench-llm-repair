--- /dev/fd/63	2025-12-20 07:52:18.982056235 +0000
+++ /dev/fd/62	2025-12-20 07:52:18.982056235 +0000
@@ -283,7 +283,7 @@
 this.modelClass == orig(this.modelClass)
 this.modelInstance == null
 this.modelClass == null
-return.toString == "package testng._21.VARIANT;\n\nimport testng._21.requirements.org.testng.IResultMap;\nimport testng._21.requirements.org.testng.ISuite;\nimport testng._21.requirements.org.testng.ISuiteResult;\nimport testng._21.requirements.org.testng.ITestContext;\nimport testng._21.requirements.org.testng.ITestResult;\nimport testng._21.requirements.org.testng.collections.ListMultiMap;\nimport testng._21.requirements.org.testng.collections.Lists;\nimport testng._21.requirements.org.testng.collections.Maps;\nimport testng._21.requirements.org.testng.collections.SetMultiMap;\nimport testng._21.requirements.org.testng.internal.Utils;\nimport testng._21.requirements.org.testng.reporters.jq.ResultsByClass;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class Model {\n  private ListMultiMap<ISuite, ITestResult> m_model = Maps.newListMultiMap();\n  private List<ISuite> m_suites = null;\n  private Map<String, String> m_testTags = Maps.newHashMap();\n  private Map<ITestResult, String> m_testResultMap = Maps.newHashMap();\n  private Map<ISuite, ResultsByClass> m_failedResultsByClass = Maps.newHashMap();\n  private Map<ISuite, ResultsByClass> m_skippedResultsByClass = Maps.newHashMap();\n  private Map<ISuite, ResultsByClass> m_passedResultsByClass = Maps.newHashMap();\n  private List<ITestResult> m_allFailedResults = Lists.newArrayList();\n  // Each suite is mapped to failed.png, skipped.png or nothing (which means passed.png)\n  private Map<String, String> m_statusBySuiteName = Maps.newHashMap();\n  private SetMultiMap<String, String> m_groupsBySuiteName = Maps.newSetMultiMap();\n  private SetMultiMap<String, String> m_methodsByGroup = Maps.newSetMultiMap();\n\n  public Model(List<ISuite> suites) {\n    m_suites = suites;\n    init();\n  }\n\n  public List<ISuite> getSuites() {\n    return m_suites;\n  }\n\n  private void init() {\n    int testCounter = 0;\n    for (ISuite suite : m_suites) {\n      List<ITestResult> passed = Lists.newArrayList();\n      List<ITestResult> failed = Lists.newArrayList();\n      List<ITestResult> skipped = Lists.newArrayList();\n      Map<String, ISuiteResult> suiteResults = suite.getResults();\n      synchronized(suiteResults) {\n        for (ISuiteResult sr : suiteResults.values()) {\n          ITestContext context = sr.getTestContext();\n          m_testTags.put(context.getName(), \"test-\" + testCounter++);\n          failed.addAll(context.getFailedTests().getAllResults());\n          skipped.addAll(context.getSkippedTests().getAllResults());\n          passed.addAll(context.getPassedTests().getAllResults());\n          IResultMap[] map = new IResultMap[] {\n              context.getFailedTests(),\n              context.getSkippedTests(),\n              context.getPassedTests()\n          };\n          for (IResultMap m : map) {\n            for (ITestResult tr : m.getAllResults()) {\n              m_testResultMap.put(tr, getTestResultName(tr));\n            }\n          }\n        }\n      }\n\n      // Process them in the order passed, skipped and failed, so that the failed\n      // icon overrides all the others and the skipped icon overrides passed.\n\n      // Passed\n      {\n        ResultsByClass rbc = new ResultsByClass();\n        for (ITestResult tr : passed) {\n          rbc.addResult(tr.getTestClass().getRealClass(), tr);\n          updateGroups(suite, tr);\n        }\n        m_passedResultsByClass.put(suite, rbc);\n      }\n\n      // Skipped\n      {\n        ResultsByClass rbc = new ResultsByClass();\n        for (ITestResult tr : skipped) {\n          m_statusBySuiteName.put(suite.getName(), \"skipped\");\n          rbc.addResult(tr.getTestClass().getRealClass(), tr);\n          updateGroups(suite, tr);\n        }\n        m_skippedResultsByClass.put(suite, rbc);\n      }\n\n      // Failed\n      {\n        ResultsByClass rbc = new ResultsByClass();\n        for (ITestResult tr : failed) {\n          m_statusBySuiteName.put(suite.getName(), \"failed\");\n          rbc.addResult(tr.getTestClass().getRealClass(), tr);\n          m_allFailedResults.add(tr);\n          updateGroups(suite, tr);\n        }\n        m_failedResultsByClass.put(suite, rbc);\n      }\n\n      m_model.putAll(suite, failed);\n      m_model.putAll(suite, skipped);\n      m_model.putAll(suite, passed);\n    }\n  }\n\n  private void updateGroups(ISuite suite, ITestResult tr) {\n    String[] groups = tr.getMethod().getGroups();\n    m_groupsBySuiteName.putAll(suite.getName(),\n        Arrays.asList(groups));\n    for (String group : groups) {\n      m_methodsByGroup.put(group, tr.getMethod().getMethodName());\n    }\n  }\n\n  public ResultsByClass getFailedResultsByClass(ISuite suite) {\n    return m_failedResultsByClass.get(suite);\n  }\n\n  public ResultsByClass getSkippedResultsByClass(ISuite suite) {\n    return m_skippedResultsByClass.get(suite);\n  }\n\n  public ResultsByClass getPassedResultsByClass(ISuite suite) {\n    return m_passedResultsByClass.get(suite);\n  }\n\n  public String getTag(ITestResult tr) {\n    return m_testResultMap.get(tr);\n  }\n\n  public List<ITestResult> getTestResults(ISuite suite) {\n    return nonnullList(m_model.get(suite));\n   }\n\n  public static String getTestResultName(ITestResult tr) {\n    StringBuilder result = new StringBuilder(tr.getMethod().getMethodName());\n    Object[] parameters = tr.getParameters();\n    if (parameters.length > 0) {\n      result.append(\"(\");\n      StringBuilder p = new StringBuilder();\n      for (int i = 0; i < parameters.length; i++) {\n        if (i > 0) p.append(\", \");\n        p.append(Utils.toString(parameters[i]));\n      }\n      if (p.length() > 100) {\n        String s = p.toString().substring(0, 100);\n        s = s + \"...\";\n        result.append(s);\n      } else {\n        result.append(p.toString());\n      }\n      result.append(\")\");\n    }\n\n    return result.toString();\n  }\n\n  public List<ITestResult> getAllFailedResults() {\n    return m_allFailedResults;\n  }\n\n  public static String getImage(String tagClass) {\n    return tagClass + \".png\";\n  }\n\n  public String getStatusForSuite(String suiteName) {\n    String result = m_statusBySuiteName.get(suiteName);\n    return result != null ? result : \"passed\";\n  }\n\n  public <T> Set<T> nonnullSet(Set<T> l) {\n    return l != null ? l : Collections.<T>emptySet();\n  }\n\n  public <T> List<T> nonnullList(List<T> l) {\n    return l != null ? l : Collections.<T>emptyList();\n  }\n\n  public List<String> getGroups(String name) {\n    List<String> result = Lists.newArrayList(nonnullSet(m_groupsBySuiteName.get(name)));\n    Collections.sort(result);\n    return result;\n  }\n\n  public List<String> getMethodsInGroup(String groupName) {\n    List<String> result = Lists.newArrayList(nonnullSet(m_methodsByGroup.get(groupName)));\n    Collections.sort(result);\n    return result;\n  }\n\n  public List<ITestResult> getAllTestResults(ISuite suite) {\n    return getAllTestResults(suite, true /* tests only */);\n  }\n\n  public List<ITestResult> getAllTestResults(ISuite suite, boolean testsOnly) {\n    List<ITestResult> result = Lists.newArrayList();\n    for (ISuiteResult sr : suite.getResults().values()) {\n      result.addAll(sr.getTestContext().getPassedTests().getAllResults());\n      result.addAll(sr.getTestContext().getFailedTests().getAllResults());\n      result.addAll(sr.getTestContext().getSkippedTests().getAllResults());\n      if (! testsOnly) {\n        result.addAll(sr.getTestContext().getPassedConfigurations().getAllResults());\n        result.addAll(sr.getTestContext().getFailedConfigurations().getAllResults());\n        result.addAll(sr.getTestContext().getSkippedConfigurations().getAllResults());\n      }\n    }\n    return result;\n  }\n}\n"
+return.toString == "package testng._21.VARIANT;\n\nimport testng._21.requirements.org.testng.reporters.jq.ResultsByClass;\nimport testng._21.requirements.org.testng.IResultMap;\nimport testng._21.requirements.org.testng.ISuite;\nimport testng._21.requirements.org.testng.ISuiteResult;\nimport testng._21.requirements.org.testng.ITestContext;\nimport testng._21.requirements.org.testng.ITestResult;\nimport testng._21.requirements.org.testng.collections.ListMultiMap;\nimport testng._21.requirements.org.testng.collections.Lists;\nimport testng._21.requirements.org.testng.collections.Maps;\nimport testng._21.requirements.org.testng.collections.SetMultiMap;\nimport testng._21.requirements.org.testng.internal.Utils;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class Model {\n  private ListMultiMap<ISuite, ITestResult> m_model = Maps.newListMultiMap();\n  private List<ISuite> m_suites = null;\n  private Map<String, String> m_testTags = Maps.newHashMap();\n  private Map<ITestResult, String> m_testResultMap = Maps.newHashMap();\n  private Map<ISuite, ResultsByClass> m_failedResultsByClass = Maps.newHashMap();\n  private Map<ISuite, ResultsByClass> m_skippedResultsByClass = Maps.newHashMap();\n  private Map<ISuite, ResultsByClass> m_passedResultsByClass = Maps.newHashMap();\n  private List<ITestResult> m_allFailedResults = Lists.newArrayList();\n  // Each suite is mapped to failed.png, skipped.png or nothing (which means passed.png)\n  private Map<String, String> m_statusBySuiteName = Maps.newHashMap();\n  private SetMultiMap<String, String> m_groupsBySuiteName = Maps.newSetMultiMap();\n  private SetMultiMap<String, String> m_methodsByGroup = Maps.newSetMultiMap();\n\n  public Model(List<ISuite> suites) {\n    m_suites = suites;\n    init();\n  }\n\n  public List<ISuite> getSuites() {\n    return m_suites;\n  }\n\n  private void init() {\n    int testCounter = 0;\n    for (ISuite suite : m_suites) {\n      List<ITestResult> passed = Lists.newArrayList();\n      List<ITestResult> failed = Lists.newArrayList();\n      List<ITestResult> skipped = Lists.newArrayList();\n      Map<String, ISuiteResult> results = suite.getResults();\n      synchronized (results) {\n        for (ISuiteResult sr : results.values()) {\n          ITestContext context = sr.getTestContext();\n          m_testTags.put(context.getName(), \"test-\" + testCounter++);\n          failed.addAll(context.getFailedTests().getAllResults());\n          skipped.addAll(context.getSkippedTests().getAllResults());\n          passed.addAll(context.getPassedTests().getAllResults());\n          IResultMap[] map = new IResultMap[] {\n              context.getFailedTests(),\n              context.getSkippedTests(),\n              context.getPassedTests()\n          };\n          for (IResultMap m : map) {\n            for (ITestResult tr : m.getAllResults()) {\n              m_testResultMap.put(tr, getTestResultName(tr));\n            }\n          }\n        }\n      }\n\n      // Process them in the order passed, skipped and failed, so that the failed\n      // icon overrides all the others and the skipped icon overrides passed.\n\n      // Passed\n      {\n        ResultsByClass rbc = new ResultsByClass();\n        for (ITestResult tr : passed) {\n          rbc.addResult(tr.getTestClass().getRealClass(), tr);\n          updateGroups(suite, tr);\n        }\n        m_passedResultsByClass.put(suite, rbc);\n      }\n\n      // Skipped\n      {\n        ResultsByClass rbc = new ResultsByClass();\n        for (ITestResult tr : skipped) {\n          m_statusBySuiteName.put(suite.getName(), \"skipped\");\n          rbc.addResult(tr.getTestClass().getRealClass(), tr);\n          updateGroups(suite, tr);\n        }\n        m_skippedResultsByClass.put(suite, rbc);\n      }\n\n      // Failed\n      {\n        ResultsByClass rbc = new ResultsByClass();\n        for (ITestResult tr : failed) {\n          m_statusBySuiteName.put(suite.getName(), \"failed\");\n          rbc.addResult(tr.getTestClass().getRealClass(), tr);\n          m_allFailedResults.add(tr);\n          updateGroups(suite, tr);\n        }\n        m_failedResultsByClass.put(suite, rbc);\n      }\n\n      m_model.putAll(suite, failed);\n      m_model.putAll(suite, skipped);\n      m_model.putAll(suite, passed);\n    }\n  }\n\n  private void updateGroups(ISuite suite, ITestResult tr) {\n    String[] groups = tr.getMethod().getGroups();\n    m_groupsBySuiteName.putAll(suite.getName(),\n        Arrays.asList(groups));\n    for (String group : groups) {\n      m_methodsByGroup.put(group, tr.getMethod().getMethodName());\n    }\n  }\n\n  public ResultsByClass getFailedResultsByClass(ISuite suite) {\n    return m_failedResultsByClass.get(suite);\n  }\n\n  public ResultsByClass getSkippedResultsByClass(ISuite suite) {\n    return m_skippedResultsByClass.get(suite);\n  }\n\n  public ResultsByClass getPassedResultsByClass(ISuite suite) {\n    return m_passedResultsByClass.get(suite);\n  }\n\n  public String getTag(ITestResult tr) {\n    return m_testResultMap.get(tr);\n  }\n\n  public List<ITestResult> getTestResults(ISuite suite) {\n    return nonnullList(m_model.get(suite));\n   }\n\n  public static String getTestResultName(ITestResult tr) {\n    StringBuilder result = new StringBuilder(tr.getMethod().getMethodName());\n    Object[] parameters = tr.getParameters();\n    if (parameters.length > 0) {\n      result.append(\"(\");\n      StringBuilder p = new StringBuilder();\n      for (int i = 0; i < parameters.length; i++) {\n        if (i > 0) p.append(\", \");\n        p.append(Utils.toString(parameters[i]));\n      }\n      if (p.length() > 100) {\n        String s = p.toString().substring(0, 100);\n        s = s + \"...\";\n        result.append(s);\n      } else {\n        result.append(p.toString());\n      }\n      result.append(\")\");\n    }\n\n    return result.toString();\n  }\n\n  public List<ITestResult> getAllFailedResults() {\n    return m_allFailedResults;\n  }\n\n  public static String getImage(String tagClass) {\n    return tagClass + \".png\";\n  }\n\n  public String getStatusForSuite(String suiteName) {\n    String result = m_statusBySuiteName.get(suiteName);\n    return result != null ? result : \"passed\";\n  }\n\n  public <T> Set<T> nonnullSet(Set<T> l) {\n    return l != null ? l : Collections.<T>emptySet();\n  }\n\n  public <T> List<T> nonnullList(List<T> l) {\n    return l != null ? l : Collections.<T>emptyList();\n  }\n\n  public List<String> getGroups(String name) {\n    List<String> result = Lists.newArrayList(nonnullSet(m_groupsBySuiteName.get(name)));\n    Collections.sort(result);\n    return result;\n  }\n\n  public List<String> getMethodsInGroup(String groupName) {\n    List<String> result = Lists.newArrayList(nonnullSet(m_methodsByGroup.get(groupName)));\n    Collections.sort(result);\n    return result;\n  }\n\n  public List<ITestResult> getAllTestResults(ISuite suite) {\n    return getAllTestResults(suite, true /* tests only */);\n  }\n\n  public List<ITestResult> getAllTestResults(ISuite suite, boolean testsOnly) {\n    List<ITestResult> result = Lists.newArrayList();\n    for (ISuiteResult sr : suite.getResults().values()) {\n      result.addAll(sr.getTestContext().getPassedTests().getAllResults());\n      result.addAll(sr.getTestContext().getFailedTests().getAllResults());\n      result.addAll(sr.getTestContext().getSkippedTests().getAllResults());\n      if (! testsOnly) {\n        result.addAll(sr.getTestContext().getPassedConfigurations().getAllResults());\n        result.addAll(sr.getTestContext().getFailedConfigurations().getAllResults());\n        result.addAll(sr.getTestContext().getSkippedConfigurations().getAllResults());\n      }\n    }\n    return result;\n  }\n}\n"
 ===========================================================================
 testng._21.VARIANT.Model:::OBJECT
 this.m_model.m_objects.getClass().getName() == this.m_testTags.getClass().getName()
