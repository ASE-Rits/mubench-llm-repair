# Project: testng / Case: 16

## original.java -> misuse.java
-    synchronized(invokedMethods) {
-      for (IInvokedMethod im : invokedMethods) {
-        ITestNGMethod m = im.getTestMethod();
-//      for (ITestResult tr : results) {
-//        ITestNGMethod m = tr.getMethod();
-        String cls = "test-method";
-        if (m.isBeforeSuiteConfiguration()) {
-          cls = "configuration-suite before";
-        } else if (m.isAfterSuiteConfiguration()) {
-          cls = "configuration-suite after";
-        } else if (m.isBeforeTestConfiguration()) {
-          cls = "configuration-test before";
-        } else if (m.isAfterTestConfiguration()) {
-          cls = "configuration-test after";
-        } else if (m.isBeforeClassConfiguration()) {
-          cls = "configuration-class before";
-        } else if (m.isAfterClassConfiguration()) {
-          cls = "configuration-class after";
-        } else if (m.isBeforeMethodConfiguration()) {
-          cls = "configuration-method before";
-        } else if (m.isAfterMethodConfiguration()) {
-          cls = "configuration-method after";
-        }
-        ITestResult tr = im.getTestResult();
-        String methodName = Model.getTestResultName(tr);
+    for (IInvokedMethod im : invokedMethods) {
+      ITestNGMethod m = im.getTestMethod();
+//    for (ITestResult tr : results) {
+//      ITestNGMethod m = tr.getMethod();
+      String cls = "test-method";
+      if (m.isBeforeSuiteConfiguration()) {
+        cls = "configuration-suite before";
+      } else if (m.isAfterSuiteConfiguration()) {
+        cls = "configuration-suite after";
+      } else if (m.isBeforeTestConfiguration()) {
+        cls = "configuration-test before";
+      } else if (m.isAfterTestConfiguration()) {
+        cls = "configuration-test after";
+      } else if (m.isBeforeClassConfiguration()) {
+        cls = "configuration-class before";
+      } else if (m.isAfterClassConfiguration()) {
+        cls = "configuration-class after";
+      } else if (m.isBeforeMethodConfiguration()) {
+        cls = "configuration-method before";
+      } else if (m.isAfterMethodConfiguration()) {
+        cls = "configuration-method after";
+      }
+      ITestResult tr = im.getTestResult();
+      String methodName = Model.getTestResultName(tr);
-        if (!m.getTestClass().getName().equals(currentClass)) {
-          if (!"".equals(currentClass)) {
-            xsb.pop(D);
-          }
-          xsb.push(D, C, "chronological-class");
-          xsb.addRequired(D, m.getTestClass().getName(), C, "chronological-class-name");
-          currentClass = m.getTestClass().getName();
-        }
-        xsb.push(D, C, cls);
-        if (tr.getStatus() == ITestResult.FAILURE) {
-          xsb.push("img", "src", Model.getImage("failed"));
-          xsb.pop("img");
+      if (!m.getTestClass().getName().equals(currentClass)) {
+        if (!"".equals(currentClass)) {
+          xsb.pop(D);
+        xsb.push(D, C, "chronological-class");
+        xsb.addRequired(D, m.getTestClass().getName(), C, "chronological-class-name");
+        currentClass = m.getTestClass().getName();
+      }
+      xsb.push(D, C, cls);
+      if (tr.getStatus() == ITestResult.FAILURE) {
+        xsb.push("img", "src", Model.getImage("failed"));
+        xsb.pop("img");
+      }
-        // No need to check for skipped methods since by definition, they were never
-        // invoked.
+      // No need to check for skipped methods since by definition, they were never
+      // invoked.
-        xsb.addRequired(S, methodName, C, "method-name");
-        if (start == 0) {
-          start = tr.getStartMillis();
-        }
-        xsb.addRequired(S, Long.toString(tr.getStartMillis() - start)  + " ms", C, "method-start");
-        xsb.pop(D);
+      xsb.addRequired(S, methodName, C, "method-name");
+      if (start == 0) {
+        start = tr.getStartMillis();
+      xsb.addRequired(S, Long.toString(tr.getStartMillis() - start)  + " ms", C, "method-start");
+      xsb.pop(D);

## misuse.java -> fixed.java
-    Collections.sort(invokedMethods, new Comparator<IInvokedMethod>() {
-      @Override
-      public int compare(IInvokedMethod arg0, IInvokedMethod arg1) {
-        return (int)
-            (arg0.getTestResult().getStartMillis() - arg1.getTestResult().getStartMillis());
-      }
-    });
+    synchronized (invokedMethods) {
+      Collections.sort(invokedMethods, new Comparator<IInvokedMethod>() {
+        @Override
+        public int compare(IInvokedMethod arg0, IInvokedMethod arg1) {
+          return (int)
+              (arg0.getTestResult().getStartMillis() - arg1.getTestResult().getStartMillis());
+        }
+      });
-    String currentClass = "";
-    long start = 0;
-    for (IInvokedMethod im : invokedMethods) {
-      ITestNGMethod m = im.getTestMethod();
+      String currentClass = "";
+      long start = 0;
+      for (IInvokedMethod im : invokedMethods) {
+        ITestNGMethod m = im.getTestMethod();
-      String cls = "test-method";
-      if (m.isBeforeSuiteConfiguration()) {
-        cls = "configuration-suite before";
-      } else if (m.isAfterSuiteConfiguration()) {
-        cls = "configuration-suite after";
-      } else if (m.isBeforeTestConfiguration()) {
-        cls = "configuration-test before";
-      } else if (m.isAfterTestConfiguration()) {
-        cls = "configuration-test after";
-      } else if (m.isBeforeClassConfiguration()) {
-        cls = "configuration-class before";
-      } else if (m.isAfterClassConfiguration()) {
-        cls = "configuration-class after";
-      } else if (m.isBeforeMethodConfiguration()) {
-        cls = "configuration-method before";
-      } else if (m.isAfterMethodConfiguration()) {
-        cls = "configuration-method after";
-      }
-      ITestResult tr = im.getTestResult();
-      String methodName = Model.getTestResultName(tr);
+        String cls = "test-method";
+        if (m.isBeforeSuiteConfiguration()) {
+          cls = "configuration-suite before";
+        } else if (m.isAfterSuiteConfiguration()) {
+          cls = "configuration-suite after";
+        } else if (m.isBeforeTestConfiguration()) {
+          cls = "configuration-test before";
+        } else if (m.isAfterTestConfiguration()) {
+          cls = "configuration-test after";
+        } else if (m.isBeforeClassConfiguration()) {
+          cls = "configuration-class before";
+        } else if (m.isAfterClassConfiguration()) {
+          cls = "configuration-class after";
+        } else if (m.isBeforeMethodConfiguration()) {
+          cls = "configuration-method before";
+        } else if (m.isAfterMethodConfiguration()) {
+          cls = "configuration-method after";
+        }
+        ITestResult tr = im.getTestResult();
+        String methodName = Model.getTestResultName(tr);
-      if (!m.getTestClass().getName().equals(currentClass)) {
-        if (!"".equals(currentClass)) {
-          xsb.pop(D);
+        if (!m.getTestClass().getName().equals(currentClass)) {
+          if (!"".equals(currentClass)) {
+            xsb.pop(D);
+          }
+          xsb.push(D, C, "chronological-class");
+          xsb.addRequired(D, m.getTestClass().getName(), C, "chronological-class-name");
+          currentClass = m.getTestClass().getName();
+        }
+        xsb.push(D, C, cls);
+        if (tr.getStatus() == ITestResult.FAILURE) {
+          xsb.push("img", "src", Model.getImage("failed"));
+          xsb.pop("img");
-        xsb.push(D, C, "chronological-class");
-        xsb.addRequired(D, m.getTestClass().getName(), C, "chronological-class-name");
-        currentClass = m.getTestClass().getName();
-      }
-      xsb.push(D, C, cls);
-      if (tr.getStatus() == ITestResult.FAILURE) {
-        xsb.push("img", "src", Model.getImage("failed"));
-        xsb.pop("img");
-      }
-      // No need to check for skipped methods since by definition, they were never
-      // invoked.
+        // No need to check for skipped methods since by definition, they were never
+        // invoked.
-      xsb.addRequired(S, methodName, C, "method-name");
-      if (start == 0) {
-        start = tr.getStartMillis();
+        xsb.addRequired(S, methodName, C, "method-name");
+        if (start == 0) {
+          start = tr.getStartMillis();
+        }
+        xsb.addRequired(S, Long.toString(tr.getStartMillis() - start)  + " ms", C, "method-start");
+        xsb.pop(D);
-      xsb.addRequired(S, Long.toString(tr.getStartMillis() - start)  + " ms", C, "method-start");
-      xsb.pop(D);

## original.java -> fixed.java
-    Collections.sort(invokedMethods, new Comparator<IInvokedMethod>() {
-      @Override
-      public int compare(IInvokedMethod arg0, IInvokedMethod arg1) {
-        return (int)
-            (arg0.getTestResult().getStartMillis() - arg1.getTestResult().getStartMillis());
-      }
-    });
+    synchronized (invokedMethods) {
+      Collections.sort(invokedMethods, new Comparator<IInvokedMethod>() {
+        @Override
+        public int compare(IInvokedMethod arg0, IInvokedMethod arg1) {
+          return (int)
+              (arg0.getTestResult().getStartMillis() - arg1.getTestResult().getStartMillis());
+        }
+      });
-    String currentClass = "";
-    long start = 0;
-    synchronized(invokedMethods) {
+      String currentClass = "";
+      long start = 0;
-//      for (ITestResult tr : results) {
-//        ITestNGMethod m = tr.getMethod();
+//    for (ITestResult tr : results) {
+//      ITestNGMethod m = tr.getMethod();
